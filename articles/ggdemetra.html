<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>ggdemetra: extending ggplot2 to perform seasonal adjustment with RJDemetra â€¢ ggdemetra</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ggdemetra: extending ggplot2 to perform seasonal adjustment with RJDemetra">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggdemetra</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/ggdemetra.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rjdverse/rjdemetra">RJDemetra</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-jdemetra-" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">JDemetra+</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-jdemetra-">
<li><a class="external-link dropdown-item" href="https://github.com/jdemetra/jdemetra-app/releases">Download JDemetra+</a></li>
    <li><a class="external-link dropdown-item" href="https://jdemetra-new-documentation.netlify.app/">JDemetra+ documentation</a></li>
  </ul>
</li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/AQLT/ggdemetra"><span class="fa fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>ggdemetra: extending ggplot2 to perform seasonal adjustment with RJDemetra</h1>
                        <h4 data-toc-skip class="author">Alain
Quartier-la-Tente</h4>
            
            <h4 data-toc-skip class="date">2025-06-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/AQLT/ggdemetra/blob/v0.2.9/vignettes/ggdemetra.Rmd" class="external-link"><code>vignettes/ggdemetra.Rmd</code></a></small>
      <div class="d-none name"><code>ggdemetra.Rmd</code></div>
    </div>

    
    
<p><code>ggdemetra</code> is an extension of <code>ggplot2</code> to add
seasonal adjustment statistics to your plots. The seasonal adjustment
process is done with <a href="https://github.com/rjdverse/rjdemetra" class="external-link">RJDemetra</a> that is an R
interface to <a href="https://github.com/jdemetra/jdemetra-app" class="external-link">JDemetra+</a>, the
seasonal adjustment software officially recommended to the members of
the European Statistical System (ESS) and the European System of Central
Banks. <code>RJDemetra</code> implements the two leading seasonal
adjustment methods <a href="https://gretl.sourceforge.net/tramo/tramo-seats.html" class="external-link">TRAMO/SEATS+</a>
and <a href="https://www.census.gov/data/software/x13as.html" class="external-link">X-12ARIMA/X-13ARIMA-SEATS</a>.</p>
<p>There are 4 main functionalities in <code>ggdemetra</code> depending
of what you want to add in the graphic:</p>
<ul>
<li>
<code><a href="../reference/geom_sa.html">geom_sa()</a></code>: to add a time series compute during the
seasonal adjustment (the trend, the seasonal adjusted time series,
etc.).<br>
</li>
<li>
<code>geom_outliers()</code>: to add the outliers used in the
pre-adjustment process of the seasonal adjustment.</li>
<li>
<code><a href="../reference/geom_arima.html">geom_arima()</a></code>: to add the ARIMA model used in the
pre-adjustment process of the seasonal adjustment.</li>
<li>
<code><a href="../reference/geom_diagnostics.html">geom_diagnostics()</a></code>: to add a table containing some
diagnostics on the seasonal adjustment process.</li>
</ul>
<p>Note <code>ts</code> objects cannot be directly used in
<code>ggplot2</code>. To convert <code>ts</code> or <code>mts</code>
object to <code>data.frame</code>, you can use the <code><a href="../reference/ts2df.html">ts2df()</a></code>
function. For example, the data <code>ipi_c_eu_df</code> used in this
package is obtained by applying the <code><a href="../reference/ts2df.html">ts2df()</a></code>function to the
<code>ipi_c_eu</code> data available in RJDemetra:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ipi_c_eu_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts2df.html">ts2df</a></span><span class="op">(</span><span class="va">ipi_c_eu</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="seasonal-adjustment-specification">Seasonal adjustment specification<a class="anchor" aria-label="anchor" href="#seasonal-adjustment-specification"></a>
</h2>
<p>All the functions have some common parameters and especially those to
defined the seasonal adjustment method:</p>
<ul>
<li>
<code>method</code> is the method used for the seasonal adjustment:
X-13ARIMA (<code>method = "x13"</code>, the default) or TRAMO-SEATS
(<code>method = "tramoseats"</code>).<br>
</li>
<li>
<code>spec</code> is the seasonal adjustment specification. It can
be the name of pre-defined specification (see
<code><a href="https://rjdverse.github.io/rjdemetra/reference/x13.html" class="external-link">?RJDemetra::x13</a></code> or <code><a href="https://rjdverse.github.io/rjdemetra/reference/tramoseats.html" class="external-link">?RJDemetra::tramoseats</a></code>) or
a user-defined specification created by <code>RJDemetra</code> (by
<code><a href="https://rjdverse.github.io/rjdemetra/reference/x13_spec.html" class="external-link">RJDemetra::x13_spec</a></code> or
<code><a href="https://rjdverse.github.io/rjdemetra/reference/tramoseats_spec.html" class="external-link">RJDemetra::tramoseats_spec</a></code>).<br>
</li>
<li>
<code>frequency</code> is the frequency of the input time series. By
default, the frequency is computed and a message is printed with the one
chosen (use <code>message = FALSE</code> to suppress this message).</li>
</ul>
<p>In the following examples, the data used is the French industrial
production index. By default, the seasonal adjustment will then be
processed with X-13ARIMA with a pre-defined specification
<code>"RSA5c</code> (automatic log detection, automatic ARIMA and
outliers detection and trading day and easter adjustment). However, in
the industrial production the working day effect has more economic sense
than the trading day effect and a gradual effect for easter does not
make economic sense for the aggregated series. The specification that
should be used with X-13ARIMA is
<code>spec = RJDemetra::x13_spec("RSA3", tradingdays.option = "WorkingDays")</code>.
If no new data or seasonal adjustment specification is specified (method
or specification), these parameters is inherited from the previous
defined: therefore you only need to specify this parameter once.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://aqlt.github.io/ggdemetra/">ggdemetra</a></span><span class="op">)</span></span>
<span><span class="va">p_ipi_fr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ipi_c_eu_df</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">FR</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Seasonal adjustment of the French industrial production index"</span>,</span>
<span>         x <span class="op">=</span> <span class="cn">NULL</span>, y <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">p_ipi_fr</span></span></code></pre></div>
<p><img src="ggdemetra_files/figure-html/unnamed-chunk-2-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="add-the-result-of-the-seasonal-adjusment">Add the result of the seasonal adjusment<a class="anchor" aria-label="anchor" href="#add-the-result-of-the-seasonal-adjusment"></a>
</h2>
<p>By default <code><a href="../reference/geom_sa.html">geom_sa()</a></code> adds the seasonal adjusted time
series:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">spec</span> <span class="op">&lt;-</span> <span class="fu">RJDemetra</span><span class="fu">::</span><span class="fu"><a href="https://rjdverse.github.io/rjdemetra/reference/x13_spec.html" class="external-link">x13_spec</a></span><span class="op">(</span><span class="st">"RSA3"</span>, tradingdays.option <span class="op">=</span> <span class="st">"WorkingDays"</span><span class="op">)</span></span>
<span><span class="va">p_ipi_fr</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/geom_sa.html">geom_sa</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#155692"</span>,</span>
<span>            spec <span class="op">=</span> <span class="va">spec</span><span class="op">)</span></span>
<span><span class="co">#&gt; Frequency used: 12</span></span></code></pre></div>
<p><img src="ggdemetra_files/figure-html/unnamed-chunk-4-1.png" width="100%"></p>
<p>To add other components of the seasonal adjustment, use the
<code>component</code> parameter of <code><a href="../reference/geom_sa.html">geom_sa()</a></code> (see
<code>?RJDemetra::user_defined_variables()</code> for the availables
parameters). For example, to add the forecasts of the input data and of
the seasonal adjusted series:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_sa</span> <span class="op">&lt;-</span> <span class="va">p_ipi_fr</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/geom_sa.html">geom_sa</a></span><span class="op">(</span>component <span class="op">=</span> <span class="st">"y_f"</span>, linetype <span class="op">=</span> <span class="fl">2</span>, message <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>            spec <span class="op">=</span> <span class="va">spec</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="../reference/geom_sa.html">geom_sa</a></span><span class="op">(</span>component <span class="op">=</span> <span class="st">"sa"</span>, color <span class="op">=</span> <span class="st">"#155692"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/geom_sa.html">geom_sa</a></span><span class="op">(</span>component <span class="op">=</span> <span class="st">"sa_f"</span>, color <span class="op">=</span> <span class="st">"#155692"</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">p_sa</span></span></code></pre></div>
<p><img src="ggdemetra_files/figure-html/unnamed-chunk-5-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="add-the-outliers-to-the-plot">Add the outliers to the plot<a class="anchor" aria-label="anchor" href="#add-the-outliers-to-the-plot"></a>
</h2>
<p>There are four differents geometrics to add to the plot the names of
the outliers used in the pre-adjustment process:</p>
<ul>
<li>
<code>geom = "text"</code> (the default) adds directly the names of
the outliers and <code>geom = "label"</code> draws a rectangle behind
the names, making them easier to read.<br>
</li>
<li>
<code>geom = "text_repel"</code> and
<code>geom = "label_repel"</code> do the same but text labels repel away
from each other and away from the data points (see
<code><a href="https://ggrepel.slowkow.com/reference/geom_text_repel.html" class="external-link">?ggrepel::geom_label_repel</a></code>).</li>
</ul>
<p>In our example, there are 3 outliers:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_sa</span> <span class="op">+</span> <span class="fu"><a href="../reference/geom_outlier.html">geom_outlier</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"label"</span><span class="op">)</span></span></code></pre></div>
<p><img src="ggdemetra_files/figure-html/unnamed-chunk-6-1.png" width="100%"></p>
<p>They can be plotted in more readable way using the parameters of
<code><a href="https://ggrepel.slowkow.com/reference/geom_text_repel.html" class="external-link">ggrepel::geom_label_repel</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_sa</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="../reference/geom_outlier.html">geom_outlier</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"label_repel"</span>,</span>
<span>                 ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">65</span><span class="op">)</span>, </span>
<span>                 arrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/arrow.html" class="external-link">arrow</a></span><span class="op">(</span>length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0.03</span>, <span class="st">"npc"</span><span class="op">)</span>,</span>
<span>                               type <span class="op">=</span> <span class="st">"closed"</span>, ends <span class="op">=</span> <span class="st">"last"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="ggdemetra_files/figure-html/unnamed-chunk-7-1.png" width="100%"></p>
<p>Use the parameters <code>first_date</code> and <code>last_date</code>
to only have the outliers in a precise time interval. For example, to
only plot the outliers from 2009 use <code>first_date = 2009</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_sa</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="../reference/geom_outlier.html">geom_outlier</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"label_repel"</span>,</span>
<span>                 first_date <span class="op">=</span> <span class="fl">2009</span>,</span>
<span>                 ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">65</span><span class="op">)</span>, </span>
<span>                 arrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/arrow.html" class="external-link">arrow</a></span><span class="op">(</span>length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0.03</span>, <span class="st">"npc"</span><span class="op">)</span>,</span>
<span>                               type <span class="op">=</span> <span class="st">"closed"</span>, ends <span class="op">=</span> <span class="st">"last"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="ggdemetra_files/figure-html/unnamed-chunk-8-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="add-the-arima-model">Add the ARIMA model<a class="anchor" aria-label="anchor" href="#add-the-arima-model"></a>
</h2>
<p>The ARIMA model used pre-adjustment process can be added to the plot
with <code><a href="../reference/geom_arima.html">geom_arima()</a></code>. The parameter
<code>geom = "label"</code> draws a rectangle behind the ARIMA model,
making it easier to read:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_sa</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="../reference/geom_arima.html">geom_arima</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"label"</span>,</span>
<span>               x_arima <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>, y_arima <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>, </span>
<span>               vjust <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, hjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span><span class="op">)</span></span></code></pre></div>
<p><img src="ggdemetra_files/figure-html/unnamed-chunk-9-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="add-a-table-with-some-diagnostics">Add a table with some diagnostics<a class="anchor" aria-label="anchor" href="#add-a-table-with-some-diagnostics"></a>
</h2>
<p>A table with some diagnostics on the seasonal adjustment process can
be added with <code><a href="../reference/geom_diagnostics.html">geom_diagnostics()</a></code>. The desired diagnostics
have to be added to the <code>diagnostics</code> parameter (see
<code>?RJDemetra::user_defined_variables()</code> for the availables
diagnostics). For example, to add the result of the X-11 combined test
and the p-values of the residual seasonality qs and f tests:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diagnostics</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"diagnostics.combined.all.summary"</span>, <span class="st">"diagnostics.qs"</span>, <span class="st">"diagnostics.ftest"</span><span class="op">)</span></span>
<span><span class="va">p_sa</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="../reference/geom_diagnostics.html">geom_diagnostics</a></span><span class="op">(</span>diagnostics <span class="op">=</span> <span class="va">diagnostics</span>,</span>
<span>                     ymin <span class="op">=</span> <span class="fl">58</span>, ymax <span class="op">=</span> <span class="fl">72</span>, xmin <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>                     table_theme <span class="op">=</span> <span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">ttheme_default</a></span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">8</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="ggdemetra_files/figure-html/unnamed-chunk-10-1.png" width="100%"></p>
<p>To customize the names of the diagnostics in the plot, pass a named
vector to the <code>diagnostics</code> parameter:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diagnostics</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>`Combined test` <span class="op">=</span> <span class="st">"diagnostics.combined.all.summary"</span>,</span>
<span>                 `Residual qs-test (p-value)` <span class="op">=</span> <span class="st">"diagnostics.qs"</span>,</span>
<span>                 `Residual f-test (p-value)` <span class="op">=</span> <span class="st">"diagnostics.ftest"</span><span class="op">)</span></span>
<span><span class="va">p_sa</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="../reference/geom_diagnostics.html">geom_diagnostics</a></span><span class="op">(</span>diagnostics <span class="op">=</span> <span class="va">diagnostics</span>,</span>
<span>                     ymin <span class="op">=</span> <span class="fl">58</span>, ymax <span class="op">=</span> <span class="fl">72</span>, xmin <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>                     table_theme <span class="op">=</span> <span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">ttheme_default</a></span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">8</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="ggdemetra_files/figure-html/unnamed-chunk-11-1.png" width="100%"></p>
<p>To add the table below the plot, you can for example use
<code><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">gridExtra::grid.arrange()</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_diag</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ipi_c_eu_df</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">FR</span><span class="op">)</span><span class="op">)</span>  <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/geom_diagnostics.html">geom_diagnostics</a></span><span class="op">(</span>diagnostics <span class="op">=</span> <span class="va">diagnostics</span>,</span>
<span>                     spec <span class="op">=</span> <span class="va">spec</span>, frequency <span class="op">=</span> <span class="fl">12</span>,</span>
<span>                     table_theme <span class="op">=</span> <span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">ttheme_default</a></span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">8</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    </span>
<span><span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">grid.arrange</a></span><span class="op">(</span><span class="va">p_sa</span>, <span class="va">p_diag</span>,</span>
<span>             nrow <span class="op">=</span> <span class="fl">2</span>, heights  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">1.5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="ggdemetra_files/figure-html/unnamed-chunk-12-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="use-existing-model">Use existing model<a class="anchor" aria-label="anchor" href="#use-existing-model"></a>
</h2>
<p>ggdemetra offers several function that can be used to manipulate
existing models.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu">RJDemetra</span><span class="fu">::</span><span class="fu"><a href="https://rjdverse.github.io/rjdemetra/reference/x13.html" class="external-link">x13</a></span><span class="op">(</span><span class="va">ipi_c_eu</span><span class="op">[</span>,<span class="st">"UK"</span><span class="op">]</span>, <span class="va">spec</span><span class="op">)</span></span></code></pre></div>
<p>The previous plots can be initialized with the
<code><a href="../reference/init_ggplot.html">init_ggplot()</a></code> function:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/init_ggplot.html">init_ggplot</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>color <span class="op">=</span>  <span class="st">"#F0B400"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/geom_sa.html">geom_sa</a></span><span class="op">(</span>color <span class="op">=</span>  <span class="st">"#155692"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/geom_arima.html">geom_arima</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"label"</span>,</span>
<span>               x_arima <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>, y_arima <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>, </span>
<span>               vjust <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, hjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span><span class="op">)</span></span></code></pre></div>
<p><img src="ggdemetra_files/figure-html/init-ggplot-1.png" width="100%"></p>
<p>The different components of seasonal adjustment models can be
extracted through <code><a href="../reference/components.html">calendar()</a></code>, <code><a href="../reference/components.html">calendaradj()</a></code>,
<code><a href="../reference/components.html">irregular()</a></code>, <code><a href="../reference/components.html">trendcycle()</a></code>,
<code><a href="../reference/components.html">seasonal()</a></code>, <code><a href="../reference/components.html">seasonaladj()</a></code>,
<code><a href="../reference/components.html">trendcycle()</a></code> and <code><a href="../reference/components.html">raw()</a></code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.union.html" class="external-link">ts.union</a></span><span class="op">(</span><span class="fu"><a href="../reference/components.html">raw</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span>, <span class="fu"><a href="../reference/components.html">raw</a></span><span class="op">(</span><span class="va">mod</span>, forecast <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="../reference/components.html">trendcycle</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span>, <span class="fu"><a href="../reference/components.html">trendcycle</a></span><span class="op">(</span><span class="va">mod</span>, forecast <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="../reference/components.html">seasonaladj</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span>, <span class="fu"><a href="../reference/components.html">seasonaladj</a></span><span class="op">(</span><span class="va">mod</span>, forecast <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y"</span>, <span class="st">"y_f"</span>,</span>
<span>                    <span class="st">"t"</span>, <span class="st">"t_f"</span>,</span>
<span>                    <span class="st">"sa"</span>, <span class="st">"sa_f"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="../reference/ts2df.html">ts2df</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">y</span><span class="op">)</span>, color <span class="op">=</span>  <span class="st">"#F0B400"</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">y_f</span><span class="op">)</span>, color <span class="op">=</span>  <span class="st">"#F0B400"</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">t</span><span class="op">)</span>, color <span class="op">=</span>  <span class="st">"#1E6C0B"</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">t_f</span><span class="op">)</span>, color <span class="op">=</span>  <span class="st">"#1E6C0B"</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">sa</span><span class="op">)</span>, color <span class="op">=</span>  <span class="st">"#155692"</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">sa_f</span><span class="op">)</span>, color <span class="op">=</span>  <span class="st">"#155692"</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="ggdemetra_files/figure-html/sa-init-1.png" width="100%"></p>
<p>SI-ratio plots can be plotted with <code>siratioplot</code> and
<code>ggsiratioplot</code>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/siratio.html">ggsiratioplot</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></code></pre></div>
<p><img src="ggdemetra_files/figure-html/ggsiratio-1.png" width="100%"></p>
<p>And there is also an <code><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot()</a></code> function:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></code></pre></div>
<p><img src="ggdemetra_files/figure-html/autoplot-1.png" width="100%"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alain Quartier-la-Tente.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
