<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>'ggplot2' Extension for Seasonal and Trading Day Adjustment with 'RJDemetra' • ggdemetra</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="'ggplot2' Extension for Seasonal and Trading Day Adjustment with 'RJDemetra'">
<meta property="og:description" content="Provides 'ggplot2' functions to return the results of seasonal and trading day adjustment 
    made by 'RJDemetra'. 'RJDemetra' is an 'R' interface around 'JDemetra+' (&lt;https://github.com/jdemetra/jdemetra-app&gt;),
    the seasonal adjustment software officially recommended to the members of the European Statistical System and
    the European System of Central Banks.">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">ggdemetra</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/ggdemetra.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
<li>
  <a href="https://github.com/jdemetra/rjdemetra">RJDemetra</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    JDemetra+
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://github.com/jdemetra/jdemetra-app/releases">Download JDemetra+</a>
    </li>
    <li>
      <a href="https://jdemetradocumentation.github.io/JDemetra-documentation/">JDemetra+ documentation</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/AQLT/ggdemetra">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="ggdemetra" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#ggdemetra" class="anchor"></a>ggdemetra <img src="reference/figures/logo.png" align="right" alt="">
</h1></div>

<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>ggdemetra is an extension of <a href="https://github.com/tidyverse/ggplot2">ggplot2</a> to add seasonal adjustment statistics to your plots. The seasonal adjustment process is done with <a href="https://github.com/jdemetra/rjdemetra">RJDemetra</a> that is an R interface to <a href="https://github.com/jdemetra/jdemetra-app">JDemetra+</a>, the seasonal adjustment software <a href="https://ec.europa.eu/eurostat/cros/system/files/Jdemetra_%20release.pdf">officially recommended</a> to the members of the European Statistical System (ESS) and the European System of Central Banks. RJDemetra implements the two leading seasonal adjustment methods <a href="http://www.bde.es/bde/en/secciones/servicios/Profesionales/Programas_estadi/Programas_estad_d9fa7f3710fd821.html">TRAMO/SEATS+</a> and <a href="https://www.census.gov/srd/www/x13as/">X-12ARIMA/X-13ARIMA-SEATS</a>.</p>
<p>There are 4 main functionnalities in <code>ggdemetra</code> depending of what you want to add in the graphic:</p>
<ul>
<li>
<code><a href="reference/geom_sa.html">geom_sa()</a></code>: to add a time series compute during the seasonal adjustment (the trend, the seasonal adjusted time series, etc.).<br>
</li>
<li>
<code>geom_outliers()</code>: to add the outliers used in the pre-adjustment process of the seasonal adjustment.</li>
<li>
<code><a href="reference/geom_arima.html">geom_arima()</a></code>: to add the ARIMA model used in the pre-adjustment process of the seasonal adjustment.</li>
<li>
<code><a href="reference/geom_diagnostics.html">geom_diagnostics()</a></code>: to add a table containing some diagnostics on the seasonal adjustment process.</li>
</ul>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Since RJDemetra requires Java SE 8 or later version, the same requirements are also needed for ggdemetra.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># Install release version from CRAN</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"ggdemetra"</span>)</a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co"># Install development version from GitHub</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb1-6" title="6">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"AQLT/ggdemetra"</span>)</a></code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>By default, the seasonal adjustment is made with X-13-ARIMA with the pre-defined specification “RSA5c” (automatic log detection, automatic ARIMA and outliers detection and trading day and easter adjustment). If no new data or seasonal adjustment specification is specified (method or specification), these parameters is inherited from the previous defined: therefore you only need to specify the specification once. In the following examples, the seasonal adjustment will be perform with X-13-ARIMA with working day adjustment and no gradual easter effect adjustment.</p>
<p>To add the seasonal adjusted series and the forecasts of the input data and of the seasonal adjusted series:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggdemetra)</a>
<a class="sourceLine" id="cb2-3" title="3">spec &lt;-<span class="st"> </span>RJDemetra<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/RJDemetra/topics/x13_spec">x13_spec</a></span>(<span class="st">"RSA3"</span>, <span class="dt">tradingdays.option =</span> <span class="st">"WorkingDays"</span>)</a>
<a class="sourceLine" id="cb2-4" title="4"></a>
<a class="sourceLine" id="cb2-5" title="5">p_ipi_fr &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> ipi_c_eu_df, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> FR)) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="st">    </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"Seasonal adjustment of the French industrial production index"</span>,</a>
<a class="sourceLine" id="cb2-8" title="8">         <span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb2-9" title="9">p_sa &lt;-<span class="st"> </span>p_ipi_fr <span class="op">+</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="st">    </span><span class="kw"><a href="reference/geom_sa.html">geom_sa</a></span>(<span class="dt">component =</span> <span class="st">"y_f"</span>, <span class="dt">linetype =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb2-11" title="11">            <span class="dt">spec =</span> spec) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="st">    </span><span class="kw"><a href="reference/geom_sa.html">geom_sa</a></span>(<span class="dt">component =</span> <span class="st">"sa"</span>, <span class="dt">color =</span> <span class="st">"red"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="st">    </span><span class="kw"><a href="reference/geom_sa.html">geom_sa</a></span>(<span class="dt">component =</span> <span class="st">"sa_f"</span>, <span class="dt">color =</span> <span class="st">"red"</span>, <span class="dt">linetype =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb2-14" title="14">p_sa</a></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-3-1.png" width="700" style="display: block; margin: auto;"></p>
<p>To add the outliers at the bottom of the plot with an arrow to the data point and the estimated coefficients:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">p_sa <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="st">    </span><span class="kw"><a href="reference/geom_outlier.html">geom_outlier</a></span>(<span class="dt">geom =</span> <span class="st">"label_repel"</span>,</a>
<a class="sourceLine" id="cb3-3" title="3">                 <span class="dt">coefficients =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb3-4" title="4">                 <span class="dt">vjust =</span> <span class="dv">4</span>,</a>
<a class="sourceLine" id="cb3-5" title="5">                 <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="ot">NA</span>, <span class="dv">65</span>), <span class="dt">force =</span> <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb3-6" title="6">                 <span class="dt">arrow =</span> <span class="kw">arrow</span>(<span class="dt">length =</span> <span class="kw">unit</span>(<span class="fl">0.03</span>, <span class="st">"npc"</span>),</a>
<a class="sourceLine" id="cb3-7" title="7">                               <span class="dt">type =</span> <span class="st">"closed"</span>, <span class="dt">ends =</span> <span class="st">"last"</span>))</a></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-4-1.png" width="700" style="display: block; margin: auto;"></p>
<p>To add the ARIMA model:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">p_sa <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">    </span><span class="kw"><a href="reference/geom_arima.html">geom_arima</a></span>(<span class="dt">geom =</span> <span class="st">"label"</span>,</a>
<a class="sourceLine" id="cb4-3" title="3">               <span class="dt">x_arima =</span> <span class="op">-</span><span class="ot">Inf</span>, <span class="dt">y_arima =</span> <span class="op">-</span><span class="ot">Inf</span>, </a>
<a class="sourceLine" id="cb4-4" title="4">               <span class="dt">vjust =</span> <span class="dv">-1</span>, <span class="dt">hjust =</span> <span class="fl">-0.1</span>)</a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt; Frenquency used: 12</span></a></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-5-1.png" width="700" style="display: block; margin: auto;"></p>
<p>To add a table of diagnostics below the plot:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">diagnostics &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">`</span><span class="dt">Combined test</span><span class="st">`</span> =<span class="st"> "diagnostics.combined.all.summary"</span>,</a>
<a class="sourceLine" id="cb5-2" title="2">                 <span class="st">`</span><span class="dt">Residual qs-test (p-value)</span><span class="st">`</span> =<span class="st"> "diagnostics.qs"</span>,</a>
<a class="sourceLine" id="cb5-3" title="3">                 <span class="st">`</span><span class="dt">Residual f-test (p-value)</span><span class="st">`</span> =<span class="st"> "diagnostics.ftest"</span>)</a>
<a class="sourceLine" id="cb5-4" title="4">p_diag &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> ipi_c_eu_df, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> FR)) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="st">    </span><span class="kw"><a href="reference/geom_diagnostics.html">geom_diagnostics</a></span>(<span class="dt">diagnostics =</span> diagnostics,</a>
<a class="sourceLine" id="cb5-6" title="6">                     <span class="dt">table_theme =</span> gridExtra<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/gridExtra/topics/tableGrob">ttheme_default</a></span>(<span class="dt">base_size =</span> <span class="dv">8</span>),</a>
<a class="sourceLine" id="cb5-7" title="7">                     <span class="dt">message =</span> <span class="ot">FALSE</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="st">    </span><span class="kw">theme_void</span>()</a>
<a class="sourceLine" id="cb5-9" title="9">    </a>
<a class="sourceLine" id="cb5-10" title="10">gridExtra<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/gridExtra/topics/arrangeGrob">grid.arrange</a></span>(p_sa, p_diag,</a>
<a class="sourceLine" id="cb5-11" title="11">             <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">heights  =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">4</span>, <span class="fl">1.5</span>))</a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">#&gt; Frenquency used: 12</span></a></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-6-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=ggdemetra">https://​cloud.r-project.org/​package=ggdemetra</a>
</li>
<li>Browse source code at <br><a href="https://github.com/AQLT/ggdemetra">https://​github.com/​AQLT/​ggdemetra</a>
</li>
<li>Report a bug at <br><a href="https://github.com/AQLT/ggdemetra/issues">https://​github.com/​AQLT/​ggdemetra/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://joinup.ec.europa.eu/software/page/eupl">EUPL</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Alain Quartier-la-Tente <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.com/AQLT/ggdemetra"><img src="https://api.travis-ci.com/AQLT/ggdemetra.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://cran.r-project.org/package=ggdemetra"><img src="http://www.r-pkg.org/badges/version/ggdemetra" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=ggdemetra"><img src="http://www.r-pkg.org/badges/last-release/ggdemetra" alt="CRAN last release"></a></li>
<li><a href="https://cran.r-project.org/package=ggdemetra"><img src="http://cranlogs.r-pkg.org/badges/ggdemetra?color=lightgrey" alt="CRAN monthly downloads"></a></li>
<li><a href="https://cran.r-project.org/package=ggdemetra"><img src="http://cranlogs.r-pkg.org/badges/grand-total/ggdemetra?color=lightgrey" alt="CRAN downloads"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Alain Quartier-la-Tente.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
